+++
date = '2025-11-03T22:37:10+01:00'
draft = false
title = '6ª Sessão - 3/11/2025'
+++

# Notas da 6ª sessão - 3 de novembro de 2025

## Resolução de exercícios práticos

Foi feita a resolução dos exercícios práticos propostos na sessão anterior: [If Statements (Parte 2)](../exercicios/002_if_statements).

O exercício do simulador de login foi usado para treinar melhor a sintaxe de Javascript e `if` statements.
Foram ainda abordados temas como o uso de `Deno.exit()` para terminar o programa antecipadamente.

O exercício do maior de dois números foi usado para reforçar a validação de inputs e o uso de condicionais, com destaque para o uso do operador ternário.

## While loops (Introdução)

Em programação, é muito frequente querermos repetir um bloco de código várias vezes.

Por exemplo, imaginemos o seguinte código:

```javascript
console.log("Olá!");
console.log("Olá!");
console.log("Olá!");
```

Este código imprime a mensagem "Olá!" três vezes.
Mas e se quisermos imprimir a mensagem 100 vezes? Ou 1000 vezes?
Escrever `console.log("Olá!");` 1000 vezes não é nada prático!

Para resolver este problema, podemos usar um `while` loop.
Um `while` loop permite-nos repetir um bloco de código enquanto uma condição for verdadeira.

A sintaxe básica de um `while` loop é a seguinte:

```javascript
while (condição) {
    // bloco de código a repetir
}
```

O bloco de código dentro das chaves `{}` será executado repetidamente enquanto a `condição` for verdadeira.
Vamos ver alguns casos comuns de uso de `while` loops.

### Usar while loops para repetir um número fixo de vezes

Por exemplo, o seguinte código imprime "Olá!" 5 vezes:

```javascript
let contador = 0;
while (contador < 5) {
    console.log("Olá!");
    contador++; // incrementa o contador
}
// => Imprime "Olá!" 5 vezes
```

Neste exemplo, começamos com um `contador` inicializado a 0.
O `while loop` verifica se o `contador` é menor que 5.
Na primeira iteração, o `contador` é 0, então a condição `contador < 5` é verdadeira e o bloco de código dentro do loop é executado, imprimindo "Olá!".
Depois, incrementamos o `contador` em 1 com `contador++`.
O loop repete este processo: verifica a condição, imprime "Olá!" e incrementa o `contador`.
Isto continua até que o `contador` atinja 5, em que a condição `contador < 5` torna-se falsa e o loop termina.

{{% hint tip %}}
Em programação, é comum começar contadores em 0 em vez de 1, e fazer loops que verificam se o valor é "menor que" um certo número.
Podiamos ter escrito o exemplo acima de outra forma, começando o contador em 1 e verificando se é "menor ou igual a 5":

```javascript
let contador = 1;
while (contador <= 5) {
    console.log("Olá!");
    contador++;
}
```

Isto seria equivalente ao exemplo anterior, mas irá parecer estranho a um programador experiente, pois a convenção é começar contadores em 0 e usar "menor que" em vez de "menor ou igual a".
{{% /hint %}}

### Usar while loops para repetir até uma condição ser satisfeita

Podemos também usar `while` loops para repetir um bloco de código até que uma certa condição seja satisfeita.
Por exemplo, o seguinte código pede ao utilizador para inserir um número (válido) positivo.

```javascript
let numeroValido = false; // no inicio, não temos um número, então o número não é válido

while (!numeroValido) { 
    // enquanto o número não for válido, pede input ao utilizador
    let input = prompt("Por favor, insere um número positivo:");
    let numero = Number(input);
    
    if (!isNaN(numero) && numero > 0) {
        // consideramos um número válido se a conversão para número
        // não resultar em NaN e o número for maior que 0
        numeroValido = true;
    } else {
        console.log("Número inválido. Tenta novamente.");
    }
}
console.log("Inseriste o número positivo: " + numero);
```

### Loops infinitos

Um cuidado importante ao usar `while` loops é garantir que a condição eventualmente se torna falsa.
Se a condição nunca se tornar falsa, o loop continuará a executar indefinidamente, o que é conhecido como um "loop infinito".

Por exemplo, o seguinte código cria um loop infinito:

```javascript
while (true) {
    console.log("Isto é um loop infinito!");
}
```

Neste exemplo, a condição é sempre `true`, então o bloco de código dentro do loop será executado para sempre, imprimindo "Isto é um loop infinito!" repetidamente.

{{% hint tip %}}
Para parar loops infinitos, temos querer interromper a execução do programa de forma forçada.
Se o programa estiver a correr no terminal, podemos fazer `Ctrl + C` para parar o programa!
{{% /hint %}}

## Geração de números aleatórios

Gerar números aleatórios é uma tarefa comum em programação, usada em jogos, simulações, e muitas outras aplicações.
Podemos usar números aleatórios em conjunto com loops para criar programas interessantes.
Um exemplo clássico é a criação de jogos de "adivinhar o número", onde o computador escolhe um número aleatório e o utilizador tenta adivinhá-lo.

Nesta secção vamos ver como podemos usar Deno e Javascript para gerar números aleatórios.

### Geração de números aleatórios com Deno

Deno tem funções incluidas na sua _standard library_ que permitem gerar números aleatórios.
O módulo que permite isto é o [@std/random](https://jsr.io/@std/random).

Para usarmos este módulo, precisamos de o importar no nosso código.
Em sessões futuras iremos falar mais sobre módulos e importações.
Por agora, basta saber que os imports nos permitem importar funcionades de outros módulos para o nosso código e que estes devem ser colocados no início de qualquer ficheiro.
Para importar a função `randomIntegerBetween` do módulo `@std/random`, colocamos o seguinte no início do nosso ficheiro:

```javascript
import { randomIntegerBetween } from "jsr:@std/random";
```

Depois de importar o módulo, podemos usar a função `randomIntegerBetween(min, max)` para gerar um número inteiro aleatório entre `min` (inclusivo) e `max` (inclusivo).

```javascript
import { randomIntegerBetween } from "jsr:@std/random";
let numeroAleatorio = randomIntegerBetween(1, 10);
console.log(numeroAleatorio);
// => Pode imprimir qualquer número entre 1 e 10 (inclusivo)
```

{{% hint tip %}}
A primeira vez que corremos este código, convém garantir acesso à internet, uma vez que Deno irá fazer download do módulo `@std/random` e guardá-lo no nosso computador.
Nas execuções seguintes, Deno irá usar a versão guardada do módulo, por isso não é necessário fazer download novamente.
{{% /hint %}}

### Geração de números aleatórios com Javascript com `Math.random()`

A função `randomIntegerBetween` do Deno é muito útil para gerar números aleatórios dentro de um intervalo, que normalmente é exactamente o que queremos.
No entanto, nem todos os projectos de Javascript usam Deno, sendo importante conhecer também a forma nativa de Javascript para gerar números aleatórios.
Esta forma de gerar números aplica-se por isso a qualquer ambiente Javascript.

Em qualquer ambiente Javascript, podemos usar a função `Math.random()` para gerar números aleatórios.
A função `Math.random()` devolve um número decimal (float) aleatório entre 0 (inclusivo) e 1 (exclusivo).

```javascript
let numeroAleatorio = Math.random();
console.log(numeroAleatorio);
// => 0.123456789
```

A função `Math.random()` não é tão prática como a função `randomIntegerBetween` do Deno, uma vez que não nos permite especificar um intervalo directamente.
No entanto, podemos usar algumas operações matemáticas simples para gerar números aleatórios dentro de um intervalo específico.

Para perceber como podemos manipular o valor devolvido por `Math.random()` para o intervalo de números que queremos, consideremos inicialmente a função `Math.random()` de forma isolada.

Sabemos que `Math.random()` devolve um número decimal entre 0 (inclusivo) e 1 (exclusivo).
Podemos representar isto através da seguinte figura:

{{< image src="images/sessoes/06/math_random.png" alt="Intervalo de valores de Math.random" title="Intervalo de valores de Math.random()" class="img-medium" >}}

Nesta figura a bola preta sólida perto do zero indica que o valor 0 está incluído no intervalo de valores possíveis (inclusivo), enquanto a bola preta oca perto do 1 indica que o valor 1 não está incluído no intervalo (exclusivo).

Se multiplicarmos o valor devolvido por `Math.random()` por um número `n`, o intervalo de valores possíveis será multiplicado por `n`.
Ou seja:

{{< image src="images/sessoes/06/math_random_n.png" alt="Intervalo de valores de Math.random" title="Intervalo de valores de Math.random()" class="img-medium" >}}

Se adicionarmos 1 a este valor, o intervalo de valores possíveis será deslocado 1 unidade para a direita:

{{< image src="images/sessoes/06/math_random_np1.png" alt="Intervalo de valores de Math.random" title="Intervalo de valores de Math.random()" class="img-medium" >}}

Isto põe-nos perto de gerar um número inteiro aleatório entre 1 e `n`.
Se considerarmos apenas a parte inteira do número que a expressão `Math.random() * n + 1` devolve, obtemos um número inteiro entre 1 e `n` (inclusivo).
Para considerar apenas a parte inteira, podemos usar a função `Math.floor()`, que arredonda um número decimal para o menor inteiro mais próximo.
Por exemplo:

```javascript
console.log(Math.floor(3.7)); // => 3
console.log(Math.floor(5.1)); // => 5
console.log(Math.floor(-9.9)); // => -10
```

{{% hint tip %}}
Para mais informações sobre a função `Math.floor()`, podes consultar a documentação oficial do MDN: [Math.floor() - MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor)
{{% /hint %}}

Assim, se aplicarmos `Math.floor()` à expressão `Math.random() * n + 1`, obtemos um número inteiro aleatório entre 1 e `n` (inclusivo):

{{< image src="images/sessoes/06/math_random_trunc_np1.png" alt="Intervalo de valores de Math.random" title="Intervalo de valores de Math.random()" class="img-medium" >}}


```javascript
let n = 10;
let numeroAleatorio = Math.floor(Math.random() * n + 1);
console.log(numeroAleatorio);
// => Pode imprimir qualquer número entre 1 e 10 (inclusivo)
```

Isto mostra como podemos manipular o valor devolvido por `Math.random()` para gerar números aleatórios dentro de um intervalo específico.

O código do Deno está disponível, e podemos espreitar a forma como a função `randomIntegerBetween` está implementada internamente.
A implementação desta lógica está no ficheiro [random_between.ts](https://jsr.io/@std/random/0.1.3/integer_between.ts) e [random_integer_between.ts](https://jsr.io/@std/random/0.1.3/random_integer_between.ts) e pode ser simplificada a:

```javascript
// Podemos ajustar estes valores para o intervalo desejado
let min = 1; 
let max = 10;

const x = Math.random();
const y = min * (1 - x) + max * x;
const n = y >= min && y < max ? y : min;

let numeroAleatorio = Math.floor(n);
console.log(numeroAleatorio);
// => Pode imprimir qualquer número inteiro entre min e max (inclusivo)
```

Aqui podemos ver que a função `randomIntegerBetween` usa `Math.random()` para gerar um número aleatório `x` entre 0 e 1, e depois manipula este intervalo através de algumas expressões.
Deixa-se como exercício para o leitor analisar a lógica usada para gerar o número aleatório dentro do intervalo desejado.

### Porque não podemos gerar números aleatórios infinitos?

Uma questão interessante que surgiu durante a sessão foi: "Porque não podemos gerar números aleatórios com um intervalo infinito?".
Porque temos que dar sempre um intervalo concreto?
Não é possível dizer que quero um número aleatório que pode ser infinitamente grande ou pequeno?
Ou dizer que quero um inteiro positivo qualquer, sem limite superior?

Há duas respostas para esta questão: uma resposta matemática e uma computacional.

#### Resposta computacional

Qualquer número em programação é representado internamente no computador através de bits.
Quantos mais bits tivermos para representar o número, maior esse número pode ser.
No entanto, o número de bits é sempre finito.
Para representar um número infinito, precisariamos de um número infinito de bits, o que não é possível num computador real.

Na prática, os computadores actuais representam números inteiros usando 64 bits.
Isto significa que o maior número inteiro que podemos representar é `2^64 - 1 = 18.446.744.073.709.551.615`.
Se considerarmos que os números negativos também são representados, o intervalo de números inteiros representáveis é aproximadamente entre `-9.223.372.036.854.775.808` e `9.223.372.036.854.775.807`.

Em Javascript, os números são representados usando o formato de ponto flutuante de 64 bits (IEEE 754), o que significa que o maior número inteiro seguro que podemos representar é ligeiramente menor.
Podemos saber qual é este valor através da constante `Number.MAX_SAFE_INTEGER`:

```javascript
console.log(Number.MAX_SAFE_INTEGER); // => 9007199254740991
```

Também existe o `Number.MIN_SAFE_INTEGER` para o menor número inteiro seguro:

```javascript
console.log(Number.MIN_SAFE_INTEGER); // => -9007199254740991
```

Tentar usar inteiros fora destes valores pode levar a resultados inesperados devido à forma como os números são representados internamente pelo computador.
Quando lidamos com números muito grandes, temos que ter algum cuidado para ver se os resultados que estamos a ter são esperados ou não.
Isto explica o motivo de não podermos gerar números aleatórios infinitos.

Aplicações que precisam de lidar com números maiores que este geralmente usam mecanismos especiais para representar números grandes.
As operações com estes números são mais lentas e complexas, pelo que só devem ser usadas quando realmente necessário.

Bill Gates (fundador da Microsoft) ficou conhecido por dizer:

> My tax return in the United States has to be kept on a special computer because their normal computers can’t deal with the numbers.

Os comutadores actuais conseguem processar números bem maiores que na altura.
Mas tal como na altura, têm limites.

#### Resposta matemática

Se dissermos "quero um número inteiro aleatório positivo", implicitamente estamos a dizer que qualquer número inteiro positivo tem a mesma probabilidade de ser escolhido.
Vamos assumir que a probabilidade de um desses números ser escolhido é `p`.
A matemática diz-nos que a soma das probabilidades de todos os eventos possíveis deve ser igual a 1.
No entanto, para infinitos números inteiros positivos, a soma das probabilidades seria:

```
p + p + p + p + ... 
``` 

Esta soma tende para um valor infinito, e não para 1.
Isto diz-nos que é matemáticamente impossível atribuir uma probabilidade igual a todos os números inteiros positivos, o que torna impossível escolher um número inteiro positivo aleatório de forma justa.

A mesma lógica aplica-se a qualquer conjunto infinito de números!





